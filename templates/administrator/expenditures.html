{% extends "administrator/base.html" %}

{% block content %}
<style>
    /* Target the table and make the text smaller */
    .table td, .table th {
        font-size: 0.75rem; /* Adjust the font size */
    }

    /* Optional: Reduce padding for a tighter layout */
    .table td, .table th {
        padding: 0.3rem;  /* Adjust padding */
    }

    /* Remove background colors for classification and expenditure type */
    h4.bg-secondary, h5.bg-info {
        background-color: transparent; /* Remove background */
        color: #000; /* Set text color to black */
    }

    /* Slightly increase the font size for classification */
    h4 {
        font-size: 1.1rem; /* Slightly larger font for classification */
    }

    /* Pagination with white background and black text */
    .pagination .page-link {
        background-color: #fff; /* White background */
        color: #000; /* Black text */
    }

    .pagination .page-link:hover {
        background-color: #f1f1f1; /* Light gray background on hover */
        color: #333; /* Darker shade of black for text on hover */
    }

    .pagination .page-item.disabled .page-link {
        background-color: #e0e0e0; /* Light gray background for disabled items */
        color: #888; /* Lighter gray text for a disabled look */
    }

    .pagination .page-item {
        margin: 0 5px; /* Add margin to each page item for spacing */
    }

    /* Remove unnecessary margins between table and expenditure type */
    .table-responsive {
        margin-bottom: 0;  /* Remove extra margin */
    }

    /* Optional: To ensure tables are uniform */
    .table {
        width: 100%;  /* Full width tables */
    }

    /* Set specific column widths */
    .table th, .table td {
        width: auto; /* Default to auto for all columns */
    }

    /* Adjusted column widths */
    .table th:nth-child(1), .table td:nth-child(1) {
        width: 10%; /* Wider column for Item Number */
    }

    .table th:nth-child(2), .table td:nth-child(2) {
        width: 15%; /* Column for Expenditure Type */
    }

    .table th:nth-child(3), .table td:nth-child(3) {
        width: 30%; /* Wider column for Description */
    }

    .table th:nth-child(4), .table td:nth-child(4) {
        width: 19%; /* Medium column for Mode of Procurement */
    }

    /* Adjusted width for Q1, Q2, Q3, Q4 columns (narrower) */
    .table th:nth-child(5), .table td:nth-child(5), /* Q1 */
    .table th:nth-child(6), .table td:nth-child(6), /* Q2 */
    .table th:nth-child(7), .table td:nth-child(7), /* Q3 */
    .table th:nth-child(8), .table td:nth-child(8) { /* Q4 */
        width: 5% !important; /* Reduced width for these columns */
    }

    /* Adjusted width for Total Quantity column */
    .table th:nth-child(9), .table td:nth-child(9) {
        width: 4%; /* Reduced width for Total Quantity */
    }

    .table th:nth-child(10), .table td:nth-child(10) {
        width: 8%; /* Column for Unit Measure */
    }

    .table th:nth-child(11), .table td:nth-child(11) {
        width: 8%; /* Column for Unit Price */
    }

    .table th:nth-child(12), .table td:nth-child(12) {
        width: 8%; /* Column for Total Amount */
    }

    .table th:nth-child(13), .table td:nth-child(13) {
        width: 10%; /* Column for Remarks */
    }

</style>

<div class="page-wrapper">
    <div class="page-header d-print-none">
        <div class="container-xl">
            <div class="row g-2 align-items-center">
                <div class="col">
                    <div class="page-pretitle">
                        Overview
                    </div>
                    <h2 class="page-title">
                        Expenditures
                    </h2>
                </div>
                <div class="col-auto ms-auto d-print-none">
                    <div class="btn-list">
                        <a href="#" class="btn btn-primary d-none d-sm-inline-block" data-bs-toggle="modal" data-bs-target="#modal-add-partnership">
                            Add New Expenditure
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="page-body container-fluid">

        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    {% for classification, expenditures in grouped_expenditures.items %}
                        <!-- New Section for each Classification -->
                        <div class="mb-3">
                             <!-- Increased font size for classification -->

                            <table class="table table-sm table-hover table-bordered">
                                <!-- Table Header -->
                                <thead>
                                    <tr>
                                        <th colspan="13">{{ classification }}</th> <!-- Adjusted colspan to match the number of columns -->
                                    </tr>
                                    <tr>
                                        <th>Item Number</th>
                                        <th>Expenditure Type</th> <!-- New Column for Expenditure Type -->
                                        <th>Description</th>
                                        <th>Mode of <br>Procurement</th>
                                        <th>Q1</th>
                                        <th>Q2</th>
                                        <th>Q3</th>
                                        <th>Q4</th>
                                        <th>Total Quantity</th>
                                        <th>Unit Measure</th>
                                        <th>Unit Price</th>
                                        <th>Total Amount</th>
                                        <th>Remarks</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for expenditure_type, items in expenditures.items %}
                                        {% for item in items %}
                                            <tr>
                                                <td>{{ item.item_number }}</td>
                                                <td>{{ expenditure_type }}</td> <!-- Display Expenditure Type -->
                                                <td>{{ item.description }}</td>
                                                <td>{{ item.mode_of_procurement }}</td>
                                                <td>{{ item.q1 }}</td>
                                                <td>{{ item.q2 }}</td>
                                                <td>{{ item.q3 }}</td>
                                                <td>{{ item.q4 }}</td>
                                                <td>{{ item.total_quantity }}</td>
                                                <td>{{ item.unit_of_measure }}</td>
                                                <td>{{ item.unit_price }}</td>
                                                <td>{{ item.total_amount }}</td>
                                                <td>{{ item.remarks }}</td>
                                            </tr>
                                        {% endfor %}
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

    </div>

</div>
{% endblock %}
